(()=>{"use strict";var t,e={177:(t,e,n)=>{n.r(e)},168:(t,e,n)=>{n.r(e)},821:(t,e,n)=>{n.r(e)},225:(t,e,n)=>{n.r(e)},883:(t,e,n)=>{n.r(e)},634:(t,e,n)=>{n.r(e)},247:(t,e,n)=>{n.r(e)},314:(t,e,n)=>{n.r(e)},962:(t,e,n)=>{n.r(e)},542:(t,e,n)=>{n.r(e)},460:(t,e,n)=>{n.r(e)},140:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switcher=void 0,e.switcher=function(t){switch(t){case 8:return"22vh";case 18:return"15vh";default:return console.log("now does not exist"),""}}},286:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=void 0,e.shuffle=function(t){for(var e,n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1));e=[t[r],t[n]],t[n]=e[0],t[r]=e[1]}}},437:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var i=n(658),a=n(318),s=n(104),c=n(237),l=n(897),u=n(747),p=n(265),d=n(598),h=n(84),f=function(){function t(t){var e,n=this;this.rootElement=t,this.isFirst=!0,this.initDB(),this.header=new l.Header,this.rootElement.appendChild(this.header.element),null===(e=this.header.getRegBtn())||void 0===e||e.addEventListener("click",(function(){n.createRegpopup()})),this.contantElement=document.createElement("div"),this.rootElement.appendChild(this.contantElement),this.router=new p.Router,this.initRoute(),this.navRoute(),window.location.hash&&this.header.changeActiveRoute(window.location.hash)}return t.prototype.initDB=function(){var t,e;return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,a.storage.createDataBase()];case 1:return n.sent(),[4,a.storage.getUserAndSetting()];case 2:return n.sent(),this.header.refreshCheck(null===(t=a.storage.user)||void 0===t?void 0:t.firstName,null===(e=a.storage.user)||void 0===e?void 0:e.avatarURL),[2]}}))}))},t.prototype.initRoute=function(){var t=this;this.router.add({page:"about",hash:"#/About",needFoo:function(){t.startAbout()}}),this.router.add({page:"game",hash:"#/Game",needFoo:function(){t.startGame()}}),this.router.add({page:"scores",hash:"#/Scores",needFoo:function(){t.startScores()}}),this.router.add({page:"setting",hash:"#/Setting",needFoo:function(){t.startSetting()}})},t.prototype.navRoute=function(){var t=this;this.header.element.addEventListener("click",(function(e){var n=e.target.closest(".nav__inner");if(n){var r=n.dataset.hash;if(!r)throw Error("Page does not exist!");t.header.changeActiveRoute(r)}}))},t.prototype.createRegpopup=function(){var t,e=this;this.regPopup=new u.RegisterPopup,this.rootElement.appendChild(this.regPopup.element),this.regPopup.showRegisterPopup().then((function(){e.regPopup&&(e.rootElement.removeChild(e.regPopup.element),e.regPopup=void 0)})),null===(t=this.regPopup.getForm())||void 0===t||t.addEventListener("submit",(function(t){return r(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return t.preventDefault(),this.regPopup?(this.regPopup.getAllData(),[4,this.regPopup.cancel()]):[3,2];case 1:return n.sent(),this.rootElement.removeChild(this.regPopup.element),this.regPopup=void 0,[3,3];case 2:throw Error("Popup does not exist");case 3:return this.header.changeAvatar(null===(e=a.storage.user)||void 0===e?void 0:e.avatarURL),this.header.toggleBtn(),a.storage.addUserAndSetting(),[2]}}))}))}))},t.prototype.startGame=function(){var t;return r(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return this.contantElement.innerHTML="",this.game=new c.Game,e=new s.Field("game","main-game"),this.contantElement.appendChild(e.element),[4,this.game.start(e.contantsField.element)];case 1:return r.sent(),this.isFirst&&(this.header.toggleStartBtn(),this.header.startActive=!1,null===(t=this.header.getStartBtn())||void 0===t||t.addEventListener("click",(function(){var t;n.header.toggleStartBtn(),n.header.startActive=!n.header.startActive,null===(t=n.game)||void 0===t||t.timer.stopTimer()})),this.isFirst=!1),[2]}}))}))},t.prototype.startAbout=function(){this.headerChecker(),this.contantElement.innerHTML="",this.about||(this.about=new i.About),this.contantElement.appendChild(this.about.element)},t.prototype.startScores=function(){this.header.changeActiveRoute(window.location.hash),this.headerChecker(),this.contantElement.innerHTML="",this.scores=new d.Scores,this.contantElement.appendChild(this.scores.element)},t.prototype.startSetting=function(){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this.headerChecker(),this.contantElement.innerHTML="",this.setting=new h.Setting,this.contantElement.appendChild(this.setting.element),[4,a.storage.getUserAndSetting()];case 1:return e.sent(),this.setting.initSetting(),this.setting.getNewPlayerBtn().element.addEventListener("click",(function(){t.createRegpopup()})),[2]}}))}))},t.prototype.headerChecker=function(){this.header.startActive||(this.header.toggleStartBtn(),this.header.startActive=!0)},t}();e.App=f},658:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.About=void 0;var i=n(104);n(177);var a=function(t){function e(){var e=t.call(this,"main-section","own-about")||this;return e.contantsField.element.innerHTML='\n      <h2 class="title">How to play?</h2>\n      <div class="description">\n        <div class="rules" id="first">\n          <div class="number">1</div>\n          <p class="description__text">Register new player in game</p>\n        </div>\n        <img id="register-img" src="./Rules/Register-ex.svg" alt="register example">\n      </div>\n      <div class="description">\n        <div class="rules" id="second">\n          <div class="number">2</div>\n          <p class="description__text">Configure your game settings</p>\n        </div>\n        <img id="setting-img" src="./Rules/Setting-ex.jpg" alt="setting example">\n      </div>\n      <div class="description">\n        <div class="rules" id="third">\n          <div class="number">3</div>\n          <p class="description__text">Start you new game! Remember card positions and match it before times up.</p>\n        </div>\n        <img id="game-img" src="./Rules/Game-ex.png" alt="game example">\n      </div>',e}return o(e,t),e}(i.Field);e.About=a},250:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CardsField=void 0;var i=n(140),a=n(898),s=n(337);n(168);var c=function(t){function e(){var e=t.call(this,"div",["cards-field"])||this;return e.cards=[],e.element.style.width="calc(16/19*"+(Math.sqrt(2*s.setting.amountPairs)+1)+"*"+i.switcher(s.setting.amountPairs)+")",e}return o(e,t),e.prototype.clear=function(){this.cards=[],this.element.innerHTML=""},e.prototype.addCard=function(t){var e=this;return new Promise((function(n){e.cards=t,e.cards.forEach((function(t){e.element.appendChild(t.element)})),setTimeout((function(){e.cards.forEach((function(t){return t.flip(),n()}))}),3e3)}))},e}(a.BaseComponents);e.CardsField=c},318:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.storage=void 0;var r=n(690);e.storage=new r.DataBase},690:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataBase=void 0;var r=n(337),o="players",i="user-setting",a=function(){function t(){}return t.prototype.createDataBase=function(){var t=this;return new Promise((function(e){var n=indexedDB.open("dauniusha",1);n.onupgradeneeded=function(){t.dataBase=n.result,t.dataBase.createObjectStore(o,{keyPath:"id"}),t.dataBase.createObjectStore(i,{keyPath:"number"})},n.onsuccess=function(){t.dataBase=n.result,e()},n.onerror=function(){throw Error("Error opening database!")}}))},t.prototype.addPlayer=function(t){var e,n=null===(e=this.dataBase)||void 0===e?void 0:e.transaction([o],"readwrite");if(!n)throw Error("Data base not exist!");n.objectStore(o).put(t),n.oncomplete=function(){console.log("Player saved!")},n.onerror=function(){console.log("Error storing player!")}},t.prototype.getPlayers=function(){var t=this;return new Promise((function(e){var n,r=null===(n=t.dataBase)||void 0===n?void 0:n.transaction([o],"readonly");if(!r)throw Error("Data base not exist!");var i=r.objectStore(o).openCursor(),a=[];i.onsuccess=function(){var t=i.result;if(!t)return e(a);a.push(t.value),t.continue()},i.onerror=function(){throw Error("Error with cursor request!")}}))},t.prototype.addUserAndSetting=function(){var t,e=null===(t=this.dataBase)||void 0===t?void 0:t.transaction([i],"readwrite");if(!e)throw Error("Data base not exist!");var n=e.objectStore(i);console.log(r.setting);var o={user:this.user,setting:r.setting,number:0};n.put(o),e.oncomplete=function(){console.log("User-setting saved!")},e.onerror=function(){console.log("Error storing user-seetting!")}},t.prototype.getUserAndSetting=function(){var t=this;return new Promise((function(e,n){var o,a=null===(o=t.dataBase)||void 0===o?void 0:o.transaction([i],"readonly");if(!a)throw Error("Data base not exist!");var s=a.objectStore(i).get(0);s.onsuccess=function(){s.result?(r.setting.amountPairs=s.result.setting.amountPairs,r.setting.category=s.result.setting.category,t.user=s.result.user,e()):(t.user={firstName:"",lastName:"",mail:"",id:0,score:0},e())},s.onerror=function(){throw Error("Error with request!")}}))},t}();e.DataBase=a},802:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0,e.delay=function(t){return new Promise((function(e){setTimeout(e,1e3*t)}))}},237:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var i=n(250),a=n(318),s=n(802),c=n(107),l=n(337),u=n(286),p=n(742),d=n(8),h=function(){function t(){this.isMove=!1,this.closeCardPair=l.setting.amountPairs,this.cardsField=new i.CardsField,this.timer=new p.Timer}return t.prototype.getCardsField=function(){if(void 0!==this.cardsField)return this.cardsField;throw Error("Cards field does not exist!")},t.prototype.createGame=function(t){return r(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return this.cardsField.clear(),e=t.concat(t).map((function(t){return new c.Card(t)})),u.shuffle(e),e.forEach((function(t){t.element.addEventListener("click",(function(){return n.cardHandler(t)}))})),[4,this.cardsField.addCard(e)];case 1:return r.sent(),this.timer.startTimer(),[2]}}))}))},t.prototype.cardHandler=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.isMove||!this.timer.getTimer()?[2]:(this.isMove=!0,t.flip(),this.activeCard?this.activeCard.image===t.image?[3,3]:[4,s.delay(.2)]:(this.activeCard=t,this.isMove=!1,[2]));case 1:return e.sent(),[4,Promise.all([t.mistake(),this.activeCard.mistake()])];case 2:return e.sent(),t.flip(),this.activeCard.flip(),[3,5];case 3:return t.success(),this.activeCard.success(),this.closeCardPair--,this.closeCardPair?[3,5]:(this.timer.stopTimer(),[4,s.delay(1)]);case 4:e.sent(),this.endGame(),e.label=5;case 5:return this.activeCard=void 0,this.isMove=!1,[2]}}))}))},t.prototype.preStart=function(){return r(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){switch(r.label){case 0:return[4,fetch("./images.json")];case 1:return[4,r.sent().json()];case 2:return t=r.sent(),e=t[0],t.forEach((function(t){t.categoryName===l.setting.category&&(e=t)})),(n=e.imagesURL.map((function(t){return e.categoryName+"/"+t})).sort((function(){return Math.random()-.5}))).length=l.setting.amountPairs,this.createGame(n),[2]}}))}))},t.prototype.start=function(t){var e=this;return new Promise((function(n){t.appendChild(e.timer.element),t.appendChild(e.cardsField.element),e.preStart(),n()}))},t.prototype.endGame=function(){var t=100*l.setting.amountPairs-10*this.timer.getTimeNow();if(t<0&&(t=0),!a.storage.user)throw Error("User does not create!");a.storage.user.score=t,a.storage.addPlayer(a.storage.user),this.winPopup=new d.WinPopup(this.timer.getTimeNow()),document.body.appendChild(this.winPopup.element),this.winPopup.showWinPopup()},t}();e.Game=h},897:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0,n(821);var i,a=n(898),s="nav_active";!function(t){t[t.about=0]="about",t[t.score=1]="score",t[t.setting=2]="setting"}(i||(i={}));var c=function(t){function e(){var e=t.call(this,"header",["header"])||this;return e.navElements=[],e.startActive=!0,e.element.innerHTML='<div class="header-container">\n    <div class="logo-nav">\n      <h1 class="logo">match<span class="logo__inner">match</span></h1>\n      <nav class="nav">\n        <a class="nav__inner nav_active" href="#/About" data-hash="#/About">\n          <div class="about">\n            <span class="about__inner">?</span>\n          </div>\n          <h3 class="nav__text">About Game</h3>\n        </a>\n        <a class="nav__inner" href="#/Scores" data-hash="#/Scores">\n          <img class="nav__img" src="./Nav/Star.svg" alt="about">\n          <h3 class="nav__text">Best Score</h3>\n        </a>\n        <a class="nav__inner" href="#/Setting" data-hash="#/Setting">\n          <div class="about">\n            <img class="nav__inner-img" src="./Nav/Setting.svg" alt="about">\n          </div>\n          <h3 class="nav__text">Game Settings</h3>\n        </a>\n      </nav>\n    </div>\n    <div class="user-btn">\n      <div class="register active">\n        <button class="nav-btn register-btn">\n          <span class="add__text">register new player</span>\n        </button>\n      </div>\n      <div class="user">\n        <a class="nav-btn start-btn" href="#/Game">\n          <span class="add__text">start game</span>\n          <span class="add__text start-disactive">stop game</span>\n        </a>\n        <img class="avatar" src="./Unknown.png" alt="avatar">\n      </div>\n    </div>',e.element.querySelectorAll(".nav__inner").forEach((function(t){e.navElements.push(t)})),e.navElementActive=e.navElements[0],e.registerBtn=e.element.querySelector(".register"),e.startBtn=e.element.querySelector(".user"),e.avatarImg=e.element.querySelector(".avatar"),e}return o(e,t),e.prototype.toggleRoute=function(t){this.navElementActive.classList.remove(s),this.navElements[t].classList.add(s),this.navElementActive=this.navElements[t]},e.prototype.changeActiveRoute=function(t){if(!t)throw Error("No current route!");switch(t){case"#/About":this.toggleRoute(i.about);break;case"#/Setting":this.toggleRoute(i.setting);break;case"#/Game":this.navElementActive.classList.remove(s);break;case"#/Scores":this.toggleRoute(i.score);break;default:throw Error("Invalid route!")}},e.prototype.toggleBtn=function(){var t,e;null===(t=this.startBtn)||void 0===t||t.classList.add("active"),null===(e=this.registerBtn)||void 0===e||e.classList.remove("active")},e.prototype.refreshCheck=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e="./Unknown.png"),t){var n=this.element.querySelector(".avatar");n&&(n.src=e),this.toggleBtn()}},e.prototype.changeAvatar=function(t){void 0===t&&(t="./Unknown.png"),this.avatarImg.src=t},e.prototype.getRegBtn=function(){return this.registerBtn},e.prototype.getStartBtn=function(){return this.startBtn},e.prototype.toggleStartBtn=function(){var t,e=null===(t=this.element.querySelector(".start-btn"))||void 0===t?void 0:t.childNodes;if(!e)throw Error("Start btn does not exist!");e.forEach((function(t){t.classList&&t.classList.toggle("start-disactive")}))},e}(a.BaseComponents);e.Header=c},898:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseComponents=void 0;e.BaseComponents=function(t,e){var n;void 0===t&&(t="div"),void 0===e&&(e=[]),this.element=document.createElement(t),(n=this.element.classList).add.apply(n,e)}},104:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var i=n(898),a=function(t){function e(e,n){void 0===e&&(e="about");var r=t.call(this,"section",[e])||this,o=new i.BaseComponents("div",["container-field"]);return r.contantsField=n?new i.BaseComponents("div",["container-main",n]):new i.BaseComponents("div",["container-main"]),r.element.appendChild(o.element).appendChild(r.contantsField.element),r}return o(e,t),e}(i.BaseComponents);e.Field=a},796:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Popup=void 0,n(225);var i=n(898),a="popup_close",s=function(t){function e(){var e=t.call(this,"div",["popup","popup_close"])||this,n=new i.BaseComponents("div",["popup__inner"]);return e.popUp=new i.BaseComponents("div",["popup__container"]),n.element.appendChild(e.popUp.element),e.element.appendChild(n.element),e}return o(e,t),e.prototype.showPopup=function(){this.element.classList.remove(a)},e.prototype.closePopup=function(){var t=this;return new Promise((function(e){t.element.classList.add(a),t.element.addEventListener("transitionend",(function(){return e()}))}))},e}(i.BaseComponents);e.Popup=s},107:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0;var i=n(140),a=n(898),s=n(337);n(883);var c=function(t){function e(e){void 0===e&&(e="");var n=t.call(this,"div",["play-card"])||this,r=i.switcher(s.setting.amountPairs);return 8===s.setting.amountPairs?n.flipClass="flippedFour":n.flipClass="flippedSix",n.element.style.width="calc(16/19*"+r+")",n.element.style.height=r,n.element.innerHTML='\n      <div class="card-front" style="background: url(./images/'+e+') center no-repeat; background-size: contain">\n        <div class="clear"></div>\n      </div>\n      <div class="card-back"></div>\n    ',n.image=e,n}return o(e,t),e.prototype.flip=function(){this.element.classList.toggle(this.flipClass)},e.prototype.success=function(){return this.correlation("rgb(10, 207, 131)")},e.prototype.mistake=function(){return this.correlation("rgb(242, 78, 30)")},e.prototype.correlation=function(t){var e=this;return new Promise((function(n){var r=e.element.querySelector(".clear");r.style.background=""+t,r.style.opacity="0.5",r.addEventListener("transitionend",(function(){return r.style.opacity="0",n()}),{once:!0})}))},e}(a.BaseComponents);e.Card=c},747:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RegisterPopup=void 0,n(634);var i=n(796),a=n(318),s=function(t){function e(){var e=t.call(this)||this;return e.avatarURL="./Unknown.png",e.popUp.element.innerHTML='\n      <h2 class="title register-title">Register new Player</h2>\n      <form class="register-popup">\n        <div class="full-data">\n          <div class="user-data">\n            <div class="input-container">\n              <input class="input-name" id="first-name" type="text" required autocomplete="off" maxlength="30" pattern="^[A-Za-zА-Яа-яЁё0-9 ]+$" placeholder="First name">\n            </div>\n            <div class="input-container">\n              <input class="input-name" id="last-name" type="text" required autocomplete="off" maxlength="30" pattern="^[A-Za-zА-Яа-яЁё0-9 ]+$" placeholder="Last name">\n            </div>\n            <div class="input-container">\n              <input class="input-name" id="email" type="email" required maxlength="30" placeholder="E-mail">\n            </div>\n          </div>\n          <input class="input-avatar" type="file">\n        </div>\n        <div class="register-btns">\n          <button class="add-user-btns" type="submit">add user</button>\n          <button class="cancel-btns">cancel</button>\n        </div>\n      </form>\n    ',e.firstName=e.popUp.element.querySelector("#first-name"),e.lastName=e.popUp.element.querySelector("#last-name"),e.email=e.popUp.element.querySelector("#email"),e.addBtn=e.popUp.element.querySelector(".add-user-btns"),e.form=e.popUp.element.querySelector("form"),e.cancelBtn=e.popUp.element.querySelector(".cancel-btns"),e.inputAvatar=e.popUp.element.querySelector(".input-avatar"),e}return o(e,t),e.prototype.showRegisterPopup=function(){var t=this;return new Promise((function(n){var r,o,i,a;t.showPopup(),null===(r=t.firstName)||void 0===r||r.addEventListener("input",(function(){e.nameValidation(t.firstName)})),null===(o=t.lastName)||void 0===o||o.addEventListener("input",(function(){e.nameValidation(t.lastName)})),null===(i=t.email)||void 0===i||i.addEventListener("input",(function(){!t.email.validity.valid&&t.email.parentElement?(t.email.parentElement.classList.remove("valid"),t.email.parentElement.classList.add("invalid")):t.email.parentElement&&(t.email.parentElement.classList.remove("invalid"),t.email.parentElement.classList.add("valid"))})),null===(a=t.cancelBtn)||void 0===a||a.addEventListener("click",(function(){t.cancel().then((function(){return n()}))})),t.element.addEventListener("click",(function(e){e.target.closest(".popup__inner")||t.cancel().then((function(){return n()}))})),t.upload()}))},e.nameValidation=function(t){var e=!1;"first-name"===t.id&&(e=!0),t.validity.valueMissing?e?t.setCustomValidity("Имя не может быть пустым."):t.setCustomValidity("Фамилия не может быть пустой."):/[^0-9]{1,}/.test(t.value)?/^[^\s]+\s[^\s]+$/.test(t.value)?e?t.setCustomValidity("Имя не может содержать более чем одно слово."):t.setCustomValidity("Фамилия не может содержать более чем одно слово."):t.validity.patternMismatch?e?t.setCustomValidity("Имя не может содержать служебные символы."):t.setCustomValidity("Фамилия не может содержать служебные символы."):t.validity.tooLong?t.setCustomValidity("Колличество символов не должно превышать 30 символов."):(t.setCustomValidity(""),t.parentElement&&(t.parentElement.classList.remove("invalid"),t.parentElement.classList.add("valid"))):e?t.setCustomValidity("Имя не может состоять из цифр."):t.setCustomValidity("Фамилия не может состоять из цифр."),!t.validity.valid&&t.parentElement&&(t.parentElement.classList.remove("valid"),t.parentElement.classList.add("invalid"))},e.prototype.cancel=function(){var t=this;return new Promise((function(e){[t.email,t.firstName,t.lastName].forEach((function(t){var e,n;t.value="",null===(e=t.parentElement)||void 0===e||e.classList.remove("invalid"),null===(n=t.parentElement)||void 0===n||n.classList.remove("valid")})),t.inputAvatar.style.background="url(./Unknown.png) center no-repeat",t.inputAvatar.style.backgroundSize="cover",t.closePopup().then((function(){return e()}))}))},e.prototype.getForm=function(){return this.form},e.prototype.upload=function(){var t,e=this;null===(t=this.inputAvatar)||void 0===t||t.addEventListener("change",(function(){var t=new FileReader;if(!e.inputAvatar.files)throw Error("Files for avatar does not exist!");var n=e.inputAvatar.files[0];t.readAsDataURL(n),t.onload=function(){e.avatarURL=t.result,e.inputAvatar.style.background="url("+t.result+") center no-repeat",e.inputAvatar.style.backgroundSize="cover"},e.inputAvatar.value=""}))},e.hashCode=function(t){return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0)},e.prototype.getAllData=function(){var t=e.hashCode(this.firstName.value+this.lastName.value+this.email.value);a.storage.user={firstName:this.firstName.value,lastName:this.lastName.value,mail:this.email.value,id:t,avatarURL:this.avatarURL,score:0},a.storage.addPlayer(a.storage.user)},e}(i.Popup);e.RegisterPopup=s},265:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var n=function(){function t(){this.routes=[]}return t.prototype.add=function(t){this.routes.push(t)},t.prototype.addRoute=function(t){this.enumiration(t)},t.prototype.changeRoute=function(){var t=window.location.hash;t?this.enumiration(t):this.enumiration("#/About")},t.prototype.enumiration=function(t){this.routes.forEach((function(e){e.hash===t&&e.needFoo()}))},t}();e.Router=n},902:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Score=void 0,n(247);var i=function(t){function e(e){var n=t.call(this,"div",["each-score"])||this;return n.element.innerHTML='\n      <div class="user-info">\n        <img class="score-img" src="'+e.avatarURL+'" alt="ava">\n        <div class="user-data">\n          <p class="user-name">'+e.firstName+" "+e.lastName+'</p>\n          <p class="user-mail">'+e.mail+'</p>\n        </div>\n      </div>\n      <p class="user-score">Score: <span class="user-score__inner">'+e.score+"</span></p>\n    ",n}return o(e,t),e}(n(898).BaseComponents);e.Score=i},598:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Scores=void 0,n(314);var s=n(318),c=n(104),l=n(902),u=function(t){function e(){var e=t.call(this,"main-section","scores")||this;return e.players=[],e.playersResults=[],e.contantsField.element.innerHTML='\n      <h2 class="title scores-title">Best players</h2>\n    ',e.generalParent=document.createElement("div"),e.generalParent.classList.add("scores-fields"),e.contantsField.element.appendChild(e.generalParent),e.createResults(),e}return o(e,t),e.prototype.createResults=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.getPlayers()];case 1:return t.sent(),this.createResultsElem(this.players),[2]}}))}))},e.prototype.createResultsElem=function(t){var e=this;t.forEach((function(t){e.playersResults.push(new l.Score(t))})),this.playersResults.forEach((function(t){e.generalParent.appendChild(t.element)}))},e.prototype.getPlayers=function(){var t=this;return new Promise((function(e){return i(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return[4,s.storage.getPlayers().then((function(t){return t}))];case 1:for((t=r.sent())||(t=[]),t.sort((function(t,e){return t.score<e.score?1:-1})),n=0;n<10&&t[n]&&void 0!==t[n].score;n++)this.players.push(t[n]);return e(),[2]}}))}))}))},e}(c.Field);e.Scores=u},337:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setting=void 0;e.setting=new function(t,e){this.category=t,this.amountPairs=e}("space",8)},84:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Setting=void 0,n(962);var i=n(104),a=n(337),s=n(318),c=n(898),l="menu-open",u="menu_active",p=function(t){function e(){var e=t.call(this,"setting","setting-container")||this;return e.difficultys=[],e.types=[],e.contantsField.element.innerHTML='\n      <div class="slide-menu" id="card-type">\n        <h2 class="title">Game cards</h2>\n        <p class="description__text setting__description">select game cards type\n          <span class="vector"></span>\n        </p>\n        <ul class="menu-inner" id="type-menu__inner">\n          <li class="menu__inner-each" data-type="ingredients">\n            <p class="description__text menu__text">Ingredients</p>\n            <img class="description__img" src="./images/ingredients/avocado.svg" alt="ingredients">\n          </li>\n          <li class="menu__inner-each menu_active" data-type="space">\n            <p class="description__text menu__text">Space</p>\n            <img class="description__img" src="./images/space/pluto.svg" alt="space">\n          </li>\n          <li class="menu__inner-each" data-type="transport">\n            <p class="description__text menu__text">Transport</p>\n            <img class="description__img" src="./images/transport/car.svg" alt="transport">\n          </li>\n        </ul>\n      </div>\n      <div class="slide-menu" id="difficulty">\n        <h2 class="title">Difficulty</h2>\n        <p class="description__text setting__description">select game type\n          <span class="vector"></span>\n        </p>\n        <ul class="menu-inner" id="difficulty-menu__inner">\n          <li class="menu__inner-each menu_active" data-difficulty="4">\n            <p class="description__text menu__text">4 * 4</p>\n          </li>\n          <li class="menu__inner-each" data-difficulty="6">\n            <p class="description__text menu__text">6 * 6</p>\n          </li>\n          <p class="description__text menu__text">8 * 8 (можно не добавлять по заданию)</p>\n        </ul>\n      </div>\n    ',e.newPlayer=new c.BaseComponents("div",["add-player"]),e.contantsField.element.appendChild(e.newPlayer.element),e.newPlayer.element.title="Add new player :)",e}return o(e,t),e.prototype.newSetting=function(){this.types.forEach((function(t){t.dataset.type===a.setting.category?t.classList.add(u):t.classList.contains(u)&&t.classList.remove(u)})),this.difficultys.forEach((function(t){t.dataset.difficulty&&Math.pow(parseInt(t.dataset.difficulty,10),2)/2===a.setting.amountPairs?t.classList.add(u):t.classList.contains(u)&&t.classList.remove(u)}))},e.prototype.initMenu=function(){var t=this;this.typeMenu=document.getElementById("card-type"),this.contantsField.element.querySelectorAll("li[data-type]").forEach((function(e){t.types.push(e)})),this.difficultyMenu=document.getElementById("difficulty"),this.contantsField.element.querySelectorAll("li[data-difficulty]").forEach((function(e){t.difficultys.push(e)}))},e.prototype.initSetting=function(){this.initMenu(),this.newSetting(),this.changeSetting()},e.prototype.changeSetting=function(){var t,e,n,r,o=this;null===(t=this.typeMenu)||void 0===t||t.addEventListener("click",(function(t){var e,n,r;t.target.closest(".setting__description")&&(null===(e=o.typeMenu)||void 0===e||e.classList.toggle(l),null===(r=null===(n=o.typeMenu)||void 0===n?void 0:n.querySelector(".vector"))||void 0===r||r.classList.toggle("vector-open"))})),null===(e=this.difficultyMenu)||void 0===e||e.addEventListener("click",(function(t){var e,n,r;t.target.closest(".setting__description")&&(null===(e=o.difficultyMenu)||void 0===e||e.classList.toggle(l),null===(r=null===(n=o.difficultyMenu)||void 0===n?void 0:n.querySelector(".vector"))||void 0===r||r.classList.toggle("vector-open"))})),null===(n=document.getElementById("type-menu__inner"))||void 0===n||n.addEventListener("click",(function(t){o.chooseSetting(t)})),null===(r=document.getElementById("difficulty-menu__inner"))||void 0===r||r.addEventListener("click",(function(t){o.chooseSetting(t)}))},e.prototype.chooseSetting=function(t){var e=t.target.closest(".menu__inner-each");if(e){if(e.dataset.type)this.types.forEach((function(t){t.classList.remove(u)})),e.classList.add(u),a.setting.category=e.dataset.type;else if(e.dataset.difficulty)switch(this.difficultys.forEach((function(t){t.classList.remove(u)})),e.classList.add(u),e.dataset.difficulty){case"4":a.setting.amountPairs=Math.pow(4,2)/2;break;case"6":a.setting.amountPairs=Math.pow(6,2)/2}s.storage.addUserAndSetting()}},e.prototype.getNewPlayerBtn=function(){return this.newPlayer},e}(i.Field);e.Setting=p},742:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0,n(542);var i=n(898),a=function(t){function e(){var e=t.call(this,"div",["timer"])||this;e.timeNow=0,e.minute=new i.BaseComponents("label",["timer__inner"]),e.element.appendChild(e.minute.element);var n=new i.BaseComponents("div",["timer__colon"]);return n.element.innerHTML=":",e.element.appendChild(n.element),e.second=new i.BaseComponents("label",["timer__inner"]),e.element.appendChild(e.second.element),e.showTime(),console.log("con"),e}return o(e,t),e.prototype.showTime=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.minute.element.innerHTML=t<10?"0"+t:""+t,this.second.element.innerHTML=e<10?"0"+e:""+e},e.prototype.startTimer=function(){var t=this;this.timer=setInterval((function(){t.timeNow++,t.showTime(Math.floor(t.timeNow/60),t.timeNow%60)}),1e3)},e.prototype.stopTimer=function(){this.timer?(clearInterval(this.timer),this.timer=void 0):this.startTimer()},e.prototype.getTimeNow=function(){return this.timeNow},e.prototype.getTimer=function(){return this.timer},e}(i.BaseComponents);e.Timer=a},8:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WinPopup=void 0;var i=n(796);n(460);var a=function(t){function e(e){var n=t.call(this)||this;return Math.floor(e/60)?n.popUp.element.innerHTML="\n        <p class='congratulations'>Congratulations! You successfully found all matches on "+Math.floor(e/60)+" minutes and "+e%60+" seconds.</p>\n      ":n.popUp.element.innerHTML="\n        <p class='congratulations'>Congratulations! You successfully found all matches on "+e%60+" seconds.</p>\n      ",n.okBtn=document.createElement("a"),n.okBtn.innerHTML="ok",n.okBtn.classList.add("win-popup-btn"),n.okBtn.href="#/Scores",n.popUp.element.appendChild(n.okBtn),n}return o(e,t),e.prototype.showWinPopup=function(){var t=this;this.showPopup(),this.okBtn.addEventListener("click",(function(){t.closePopup()}))},e}(i.Popup);e.WinPopup=a}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t=new(r(437).App)(document.body),window.addEventListener("load",(function(){t.router.changeRoute()})),window.addEventListener("hashchange",(function(){t.router.changeRoute()}))})();